import{T as M,k as E,h as L,l as K,Q as f,m as c,o as x,f as b,a as e,u as k,w as n,F as V,Z as Q,b as t,p as $,t as _,n as T,d,O as Z,c as P,q as G}from"./app-DN-RUE--.js";import{_ as U}from"./BasicLayout-CC9BFqav.js";import{_ as H}from"./TextInput-C245VMaA.js";import{P as O}from"./PrimaryButton-CyOW_sER.js";import{_ as J}from"./Address-ryR6SPQX.js";import"./ApplicationLogo-CICgJVQf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"py-12"},X={class:"max-w-7xl mx-auto px-6 lg:px-8"},Y=t("h1",{class:"font-bold text-lg mb-5 text-uppercase"},"Keranjang",-1),tt={class:"space-y-6"},et={class:"flex sm:flex-row flex-col items-center sm:justify-between"},ot={class:"flex items-center"},st={class:"ml-4"},nt={class:"flex items-center space-x-5"},at={class:"flex items-center"},ct={class:"px-4 py-3 sm:p-8 bg-white shadow sm:rounded-lg flex justify-end space-x-2"},lt={class:"text-end"},it=t("p",{class:"font-semibold text-lg"},"Total",-1),dt={class:""},rt={class:"py-12"},ut={class:"max-w-7xl mx-auto px-6 lg:px-8"},pt=t("h1",{class:"font-bold text-lg mb-5 text-uppercase"}," Alamat Pengiriman ",-1),_t=t("h1",{class:"font-bold text-lg mb-5 text-uppercase"}," Informasi Toko ",-1),mt={class:"space-y-6"},ft={class:"px-4 py-3 sm:p-8 bg-white shadow sm:rounded-lg flex justify-end space-x-2"},vt={class:"text-end"},xt=t("p",{class:"font-semibold text-lg"},"Total",-1),ht={class:""},Ct={__name:"Index",props:{canLogin:{type:Boolean},canRegister:{type:Boolean},data:{type:Object}},setup(m){const q=M({is_active:!1,name:"",phone:"",address:"",subdistrict:"",district:"",city:"",province:"",latitude:"",longitude:"",gmaps_point:"",notes:""}),p=E({edit:!1,checkout:!1}),g=(o,s)=>{G.post(`${route().t.url}/cart/edit`,{id:o,quantity:s}).then(function(l){p.edit=!0}).catch(function(l){console.log(l)})},w=()=>{const o=[];for(const l in f().props.data.cart){const i=f().props.data.cart[l].product;for(const r of i)r.selected&&o.push({id:r.id,quantity:r.quantity})}const s={products:o};Z.post("/order",s)},C=L(()=>{let o=0;const s=f().props.data.cart;for(const l in s)for(const i of s[l].product)if(i.selected){const r=i.quantity*i.price;o+=r}return o}),h=L(()=>{let o=0;const s=f().props.data.cart;for(const l in s)for(const i of s[l].product)i.selected&&o++;return o}),y=o=>o!=null&&o>0?(o=Math.round(o),o.toLocaleString("id-ID")):0;return K(()=>{for(const o in f().props.data.cart)for(const s of f().props.data.cart[o].product)s.selected=!1}),(o,s)=>{const l=c("v-card-title"),i=c("v-card-item"),r=c("v-divider"),z=c("v-checkbox-btn"),F=c("v-list-item-action"),B=c("v-icon"),I=c("v-list-item"),N=c("v-list"),S=c("v-card-text"),A=c("v-card"),R=c("v-btn"),j=c("v-snackbar");return x(),b(V,null,[e(k(Q),{title:"Setiap Bagian Berharga"}),e(U,{canLogin:m.canLogin,canRegister:m.canRegister},{default:n(()=>[t("div",W,[t("div",X,[Y,t("div",tt,[(x(!0),b(V,null,$(Object.keys(m.data.cart),u=>(x(),P(A,{class:"w-full py-2"},{default:n(()=>[e(i,null,{default:n(()=>[e(l,null,{default:n(()=>[d(_(u),1)]),_:2},1024)]),_:2},1024),e(r),e(S,null,{default:n(()=>[e(N,{lines:"two"},{default:n(()=>[(x(!0),b(V,null,$(m.data.cart[u].product,a=>(x(),P(I,{rounded:"0",class:"items-center"},{prepend:n(({isActive:v})=>[e(F,{start:""},{default:n(()=>[e(z,{modelValue:a.selected,"onUpdate:modelValue":D=>a.selected=D},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),title:n(()=>[t("div",et,[t("div",ot,[t("p",st,_(a.title),1)]),t("div",nt,[t("p",null," Rp "+_(y(a.price)),1),t("div",at,[e(B,{onClick:v=>{a.quantity-=1,g(a.id,a.quantity)},size:"16",color:"green",class:"cursor-pointer"},{default:n(()=>[d(" mdi-minus ")]),_:2},1032,["onClick"]),e(H,{id:"quantity",type:"number",class:"mt-1 block w-16",modelValue:a.quantity,"onUpdate:modelValue":[v=>a.quantity=v,v=>g(a.id,a.quantity)],required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue","onUpdate:modelValue"]),e(B,{onClick:v=>{a.quantity+=1,g(a.id,a.quantity)},color:"red",size:"16",class:"cursor-pointer"},{default:n(()=>[d(" mdi-plus ")]),_:2},1032,["onClick"])])])])]),_:2},1024))),256)),e(r,{inset:""})]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),t("div",ct,[t("div",lt,[it,t("p",dt,"Rp "+_(y(C.value)),1)]),e(O,{onClick:w,class:T(["ms-4 text-center justify-center flex",{"opacity-25":k(q).processing}]),disabled:h.value==0},{default:n(()=>[d(" Pesan sekarang ("+_(h.value)+") ",1)]),_:1},8,["class","disabled"])])])])])]),_:1},8,["canLogin","canRegister"]),e(U,{canLogin:m.canLogin,canRegister:m.canRegister},{default:n(()=>[t("div",rt,[t("div",ut,[pt,_t,e(J),t("div",mt,[t("div",ft,[t("div",vt,[xt,t("p",ht,"Rp "+_(y(C.value)),1)]),e(O,{onClick:w,class:T(["ms-4 text-center justify-center flex",{"opacity-25":k(q).processing}]),disabled:h.value==0},{default:n(()=>[d(" Pesan sekarang ("+_(h.value)+") ",1)]),_:1},8,["class","disabled"])])])])])]),_:1},8,["canLogin","canRegister"]),e(j,{modelValue:p.edit,"onUpdate:modelValue":s[1]||(s[1]=u=>p.edit=u)},{actions:n(()=>[e(R,{color:"pink",variant:"text",onClick:s[0]||(s[0]=u=>p.edit=!1)},{default:n(()=>[d(" Tutup ")]),_:1})]),default:n(()=>[d(" Berhasil mengubah jumlah ")]),_:1},8,["modelValue"]),e(j,{modelValue:p.checkout,"onUpdate:modelValue":s[3]||(s[3]=u=>p.checkout=u)},{actions:n(()=>[e(R,{color:"pink",variant:"text",onClick:s[2]||(s[2]=u=>p.edit=!1)},{default:n(()=>[d(" Tutup ")]),_:1})]),default:n(()=>[d(" Berhasil checkout ")]),_:1},8,["modelValue"])],64)}}};export{Ct as default};
