import{T as D,k as I,h as C,l as M,Q as _,m as c,o as f,f as h,a as o,u as w,w as s,F as k,Z as A,b as a,p as $,t as v,n as E,d as u,O as K,c as j,q as Q}from"./app-DqZGNoNh.js";import{_ as Z}from"./BasicLayout-DhpMZM-w.js";import{_ as G}from"./TextInput-BcCEMf6o.js";import{P as H}from"./PrimaryButton-BSGPXRdF.js";import"./ApplicationLogo-DH1LJL0X.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"py-12"},W={class:"max-w-7xl mx-auto px-6 lg:px-8"},X=a("h1",{class:"font-bold text-lg mb-5 text-uppercase"},"Keranjang",-1),Y={class:"space-y-6"},tt={class:"flex sm:flex-row flex-col items-center sm:justify-between"},et={class:"flex items-center"},ot={class:"ml-4"},st={class:"flex items-center space-x-5"},nt={class:"flex items-center"},at={class:"px-4 py-3 sm:p-8 bg-white shadow sm:rounded-lg flex justify-end space-x-2"},ct={class:"text-end"},lt=a("p",{class:"font-semibold text-lg"},"Total",-1),it={class:""},ft={__name:"Index",props:{canLogin:{type:Boolean},canRegister:{type:Boolean},data:{type:Object}},setup(x){const L=D({is_active:!1,name:"",phone:"",address:"",subdistrict:"",district:"",city:"",province:"",latitude:"",longitude:"",gmaps_point:"",notes:""}),p=I({edit:!1,checkout:!1}),y=(t,e)=>{Q.post(`${route().t.url}/cart/edit`,{id:t,quantity:e}).then(function(l){p.edit=!0}).catch(function(l){console.log(l)})},R=()=>{const t=[];for(const l in _().props.data.cart){const i=_().props.data.cart[l].product;for(const d of i)d.selected&&t.push({id:d.id,quantity:d.quantity})}const e={products:t};K.post("/order",e)},T=C(()=>{let t=0;const e=_().props.data.cart;for(const l in e)for(const i of e[l].product)if(i.selected){const d=i.quantity*i.price;t+=d}return t}),b=C(()=>{let t=0;const e=_().props.data.cart;for(const l in e)for(const i of e[l].product)i.selected&&t++;return t}),g=t=>t!=null&&t>0?(t=Math.round(t),t.toLocaleString("id-ID")):0;return M(()=>{for(const t in _().props.data.cart)for(const e of _().props.data.cart[t].product)e.selected=!1}),(t,e)=>{const l=c("v-card-title"),i=c("v-card-item"),d=c("v-divider"),U=c("v-checkbox-btn"),P=c("v-list-item-action"),V=c("v-icon"),O=c("v-list-item"),z=c("v-list"),F=c("v-card-text"),N=c("v-card"),q=c("v-btn"),B=c("v-snackbar");return f(),h(k,null,[o(w(A),{title:"Setiap Bagian Berharga"}),o(Z,{canLogin:x.canLogin,canRegister:x.canRegister},{default:s(()=>[a("div",J,[a("div",W,[X,a("div",Y,[(f(!0),h(k,null,$(Object.keys(x.data.cart),r=>(f(),j(N,{class:"w-full py-2"},{default:s(()=>[o(i,null,{default:s(()=>[o(l,null,{default:s(()=>[u(v(r),1)]),_:2},1024)]),_:2},1024),o(d),o(F,null,{default:s(()=>[o(z,{lines:"two"},{default:s(()=>[(f(!0),h(k,null,$(x.data.cart[r].product,n=>(f(),j(O,{rounded:"0",class:"items-center"},{prepend:s(({isActive:m})=>[o(P,{start:""},{default:s(()=>[o(U,{modelValue:n.selected,"onUpdate:modelValue":S=>n.selected=S},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),title:s(()=>[a("div",tt,[a("div",et,[a("p",ot,v(n.title),1)]),a("div",st,[a("p",null," Rp "+v(g(n.price)),1),a("div",nt,[o(V,{onClick:m=>{n.quantity-=1,y(n.id,n.quantity)},size:"16",color:"green",class:"cursor-pointer"},{default:s(()=>[u(" mdi-minus ")]),_:2},1032,["onClick"]),o(G,{id:"quantity",type:"number",class:"mt-1 block w-16",modelValue:n.quantity,"onUpdate:modelValue":[m=>n.quantity=m,m=>y(n.id,n.quantity)],required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue","onUpdate:modelValue"]),o(V,{onClick:m=>{n.quantity+=1,y(n.id,n.quantity)},color:"red",size:"16",class:"cursor-pointer"},{default:s(()=>[u(" mdi-plus ")]),_:2},1032,["onClick"])])])])]),_:2},1024))),256)),o(d,{inset:""})]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),a("div",at,[a("div",ct,[lt,a("p",it,"Rp "+v(g(T.value)),1)]),o(H,{onClick:R,class:E(["ms-4 text-center justify-center flex",{"opacity-25":w(L).processing}]),disabled:b.value==0},{default:s(()=>[u(" Pesan sekarang ("+v(b.value)+") ",1)]),_:1},8,["class","disabled"])])])])])]),_:1},8,["canLogin","canRegister"]),o(B,{modelValue:p.edit,"onUpdate:modelValue":e[1]||(e[1]=r=>p.edit=r)},{actions:s(()=>[o(q,{color:"pink",variant:"text",onClick:e[0]||(e[0]=r=>p.edit=!1)},{default:s(()=>[u(" Tutup ")]),_:1})]),default:s(()=>[u(" Berhasil mengubah jumlah ")]),_:1},8,["modelValue"]),o(B,{modelValue:p.checkout,"onUpdate:modelValue":e[3]||(e[3]=r=>p.checkout=r)},{actions:s(()=>[o(q,{color:"pink",variant:"text",onClick:e[2]||(e[2]=r=>p.edit=!1)},{default:s(()=>[u(" Tutup ")]),_:1})]),default:s(()=>[u(" Berhasil checkout ")]),_:1},8,["modelValue"])],64)}}};export{ft as default};
